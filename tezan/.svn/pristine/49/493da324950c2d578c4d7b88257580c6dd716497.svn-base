<?php	$Create           = false;	$Delete           = true;	$MassEdit         = false;	$CustomMassDelete = false;	$actionmapping = array (		array ('actionname' => 'EditView', 'securitycheck' => '1', 'func' => 'check_add', 'type' => 'listview'),		array ('actionname' => 'ImportExcelTemplate', 'securitycheck' => '1', 'func' => 'check_ImportExcelTemplate', 'type' => 'button'),		array ('actionname' => 'ExportExcelTemplate', 'securitycheck' => '1', 'func' => 'check_ExportExcelTemplate', 'type' => 'listview'),		array ('actionname' => 'ClearDetails', 'securitycheck' => '1', 'type' => 'button', 'func' => 'check_clear', 'sequence' => '1'),		array ('actionname' => 'SimulateApply', 'securitycheck' => '1', 'type' => 'button', 'func' => 'check_SimulateApply'),		array ('actionname' => 'ProductsList', 'securitycheck' => '1', 'type' => 'ajax', 'location' => 'bottom', 'sequence' => '1'),		array('actionname' => 'Memo','securitycheck' => '1','type'=>'ajax','location'=>'bottom'),	);	if (!function_exists('check_add'))	{		function check_add()		{			global $currentModule, $current_user, $supplierusertype;			if ($supplierusertype == "ma_agencys")			{				return '<a data-id="edit" class="btn btn-default" data-icon="edit" href="index.php?module='.$currentModule.'&action=EditView" data-toggle="navtab" data-title="新建"><i class="fa fa-edit"></i> 新建</a>';			}			else				return false;		}	}	if (!function_exists('check_ExportExcelTemplate'))	{		function check_ExportExcelTemplate()		{			global $supplierid,$currentModule;			if (isset($supplierid) && $supplierid != "0" && $supplierid != "")			{				return '<a class="btn btn-default" href="index.php?module=Public&action=ExportExcelTemplate&exportmodule='.$currentModule.'&template=ma_inventorywarndetails"><i class="fa fa-edit"></i> 下载导入模板</a>';			}			else			{				return false;			}		}	}	if(!function_exists('check_ImportExcelTemplate')){		function check_ImportExcelTemplate($module,$focus){			global $supplierusertype,$supplierid;			if($supplierusertype == "ma_agencys" && !in_array($focus->column_fields['approvalstatus'],array("1","2")) && $focus->mode == 'edit'){				return '<a id="uploadtemplate" class="btn btn-default" href="javascript:;"><i class="fa fa-edit"></i> 导入明细数据</a>					<script>						Upload_PurchaseStrategy_Template("'.$module.'","ma_inventorywarndetails","'.$focus->id.'","'.$supplierid.'");					</script>				';			}else{				return false;			}		}	}	if (!function_exists('check_SimulateApply'))	{		function check_SimulateApply($module, $focus)		{			global $supplierusertype,$supplierid;			$ma_approvalflows = XN_Query::create('Content')										->tag("ma_approvalflows")										->filter('type', 'eic', "ma_approvalflows")										->filter('my.supplierid', '=', $supplierid)										->filter('my.approvalflowsstatus', '=', '1')										->filter('my.deleted', '=', '0')										->filter('my.customapprovalflowtabid', '=', "4172")										->end(1)										->execute();			$approvalflows = XN_Query::create('Content')									 ->tag("approvalflows")									 ->filter('type', 'eic', "approvalflows")									 ->filter('my.approvalflowsstatus', '=', '1')									 ->filter('my.deleted', '=', '0')									 ->filter('my.tabid', '=', "4172")									 ->end(1)									 ->execute();			if (!count($ma_approvalflows) && !count($approvalflows) && ($supplierusertype =="superadmin" ||$supplierusertype == "admin" || $supplierusertype == "ma_agencys"))			{				if (!in_array($focus->column_fields['approvalstatus'],array("1","2")) && $focus->mode == 'edit')				{					return '<a class="btn btn-default" data-toggle="dialog" data-icon="lock" data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module='.$module.'&amp;action=SimulateApply&amp;record='.$focus->id.'" class="button" ><span>提交上线</span></a>';				}				else				{					return false;				}			}		}	}	if (!function_exists('check_clear'))	{		function check_clear($module, $focus)		{			global $supplierusertype;			if($supplierusertype == "ma_agencys" && !in_array($focus->column_fields['approvalstatus'],array("1","2")) && $focus->mode == 'edit'){				return '<a class="btn btn-red" data-toggle="dialog" data-icon="trash-o" data-height="200" data-width="200" data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module='.$module.'&action=ClearDetails&record='.$focus->id.'">一键清空</a>';			}		}	}