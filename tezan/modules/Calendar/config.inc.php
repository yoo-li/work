<?php$Create = false;$Delete = false; 		global  $supplierusertype, $supplierid;		if ($supplierusertype != "superadmin")		{		    if (isset($supplierid) && $supplierid != "" && $supplierid != "0")		    {	            $register_users = XN_Query::create("Content")	                ->tag("ma_registerusers")	                ->filter("type", "eic", "ma_registerusers")	                ->filter("my.profileid", "=", XN_Profile::$VIEWER) 	                ->filter("my.deleted", "=", "0")	                ->end(1)	                ->execute();				if (count($register_users) > 0)				{			        $Create = true;			        $Delete = true;				} 		    } 		}   if (!function_exists('check_Archive')) {	function check_Archive($module,$focus) {		if ($focus->mode == 'edit') 		{			$status = strtolower($module).'status';			if ($focus->column_fields[$status] == 'Terminate')  return "";			if ($focus->column_fields[$status] == 'Archive') 			{				return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 已存档</a>';							}			else			{				if ($focus->column_fields['author'] == XN_Profile::$VIEWER && $focus->column_fields[$status] == 'Has been executed')				{					return '<a  class="btn btn-default" data-toggle="dialog" data-icon="lock" data-width="400" data-height="152"  data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module=Public&amp;action=Archive&amp;submodule='.$module.'&amp;record='.$focus->id.'" > 存档</a>';				}				else				{					return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 存档</a>';				}			}		}		else		{			return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 存档</a>';		}	}}if (!function_exists('check_Executed')) {	function check_Executed($module,$focus) {		if ($focus->mode == 'edit') 		{			$status = strtolower($module).'status';			if ($focus->column_fields[$status] == 'Terminate')  return "";			if ($focus->column_fields[$status] == 'Cancel')  return "";			if ($focus->column_fields[$status] == 'Archive')  return "";			if ($focus->column_fields[$status] == 'Has been executed') 			{				return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 已执行</a>';							}			else			{				$personman = (array)$focus->column_fields['personman'];				if (in_array(XN_Profile::$VIEWER,$personman)  && $focus->column_fields[$status] == 'Implementation')				{					return '<a  class="btn btn-default" data-toggle="dialog" data-icon="lock" data-width="400" data-height="152"  data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module='.$module.'&amp;action=Executed&amp;submodule='.$module.'&amp;record='.$focus->id.'" > 执行完成</a>'; 				}				else				{					return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 执行完成</a>';				}			}		}		else		{			return '';		}	}}if (!function_exists('check_Implementation')) {	function check_Implementation($module,$focus) {		if ($focus->mode == 'edit') 		{			$status = strtolower($module).'status';			if ($focus->column_fields[$status] == 'Terminate')  return "";			if ($focus->column_fields[$status] == 'Cancel')  return "";			if ($focus->column_fields[$status] == 'Archive')  return "";			if ($focus->column_fields[$status] == 'Has been executed')  return "";			if ($focus->column_fields[$status] == 'Implementation') 			{				return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 执行中</a>';							}			else			{				$personman = (array)$focus->column_fields['personman'];				if (in_array(XN_Profile::$VIEWER,$personman)  && $focus->column_fields[$status] == 'Not implemented')				{					return '<a  class="btn btn-default" data-toggle="dialog" data-icon="lock" data-width="400" data-height="152"  data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module='.$module.'&amp;action=Implementation&amp;submodule='.$module.'&amp;record='.$focus->id.'" > 确认执行</a>'; 				}				else				{					return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 确认执行</a>';				}			}		}		else		{			return '';		}	}}if (!function_exists('check_terminate')) {	function check_terminate($module,$focus) {		if ($focus->mode == 'edit')		{			$status = strtolower($module).'status';			if ($focus->column_fields[$status] == 'Terminate')			{				return '<a  class="btn btn-default" data-toggle="dialog" data-icon="lock" data-width="600" data-height="312"  data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module=Public&amp;action=Terminate&amp;submodule='.$module.'&amp;record='.$focus->id.'" > 查看终止原因</a>'; 			}			else			{				if ($focus->column_fields['author'] == XN_Profile::$VIEWER && $focus->column_fields[$status] != 'Archive')				{					return '<a  class="btn btn-default" data-toggle="dialog" data-icon="lock" data-width="600" data-height="312"  data-mask="true" data-maxable="false" data-resizable="false" href="index.php?module=Public&amp;action=Terminate&amp;submodule='.$module.'&amp;record='.$focus->id.'" > 终止</a>'; 	 			}				else				{					return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 终止</a>';				}			}		}		else		{			return '<a disabled class="btn btn-default" data-icon="lock" href="javascript:;" > 终止</a>';		}	}}if (!function_exists('check_Memo')) {	function check_Memo($module,$focus) {		if ($focus->mode == 'edit')		{			return "true";		}		else{			return "false";		}	}}if (!function_exists('check_link')) {	function check_link($module,$focus) {		$loadContent=XN_Content::load($focus->id,$module);		if ($loadContent->my->link != '')		{			return "true";		}		else{			return "false";		}	}}$actionmapping = array (	array('actionname' => 'Memo','securitycheck' => '1','type'=>'ajax','location'=>'bottom','func'=>'check_Memo'),	array('actionname' => 'Implementation','securitycheck' => '1','type'=>'button','func'=>'check_Implementation'),	array('actionname' => 'Executed','securitycheck' => '1','type'=>'button','func'=>'check_Executed'),	array('actionname' => 'Archive','securitycheck' => '1','type'=>'button','func'=>'check_Archive'),	array('actionname' => 'Terminate','securitycheck' => '1','type'=>'button','func'=>'check_terminate'),	array('actionname' => 'Link','securitycheck' => '1','type'=>'ajax','location'=>'base','func'=>'check_link'));?>